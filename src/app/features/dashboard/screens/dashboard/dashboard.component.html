<div class="main-container">
  <h1>List of people you want to buy present for</h1>
  <hr />

  <div
    *ngFor="let userItems of itemsToBuy$ | async | keyvalue"
    class="section-container"
  >
    <h2 class="person-name">{{ userItems.value[0].createdBy?.displayName }}</h2>

    <mat-card
      *ngFor="let item of userItems.value"
      fxLayoutAlign="start center"
      class="list-item"
    >
      <span class="item-name" [class.item-bought]="item.bought">
        {{ item.name }}
      </span>

      <div class="spacer"></div>

      <button mat-icon-button [matMenuTriggerFor]="menu">
        <mat-icon>more_vert</mat-icon>
      </button>

      <mat-menu #menu="matMenu">
        <button mat-menu-item (click)="handleMarkItemAsBought(item)">
          <mat-icon>done</mat-icon>
          <span *ngIf="!item.bought">Mark as bought</span>
          <span *ngIf="item.bought">Mark as not bought</span>
        </button>
        <button mat-menu-item (click)="unassignFromItem(item)">
          <mat-icon>delete</mat-icon>
          <span>Remove from your list</span>
        </button>
      </mat-menu>
    </mat-card>
  </div>
</div>
